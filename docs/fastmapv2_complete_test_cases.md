# FastMapV2 完整功能测试用例文档

## 文档概述

本文档详细描述了FastMapV2程序的所有功能模块和相应的测试用例，确保测试覆盖率达到100%。测试用例按功能模块组织，包含功能描述、测试步骤、预期结果和优先级。

---

## 1. 程序功能总览

### 1.1 核心功能模块
1. **主程序启动与管理** - 程序初始化、依赖检查、日志配置
2. **GUI主界面** - 主窗口、标签页、菜单栏、状态栏
3. **Map分析功能** - XML解析、Map点分析、可视化展示
4. **EXIF处理功能** - 图片解析、字段提取、数据导出
5. **报告生成功能** - HTML报告、对比分析、多维度分析
6. **对话框系统** - 配置对话框、导出对话框、查看对话框
7. **文件操作** - 文件管理、拖拽处理、格式验证
8. **数据可视化** - Map形状、图表、进度条
9. **异常处理** - 错误捕获、用户提示、程序恢复
10. **性能优化** - 异步处理、缓存管理、资源控制

### 1.2 功能测试统计
- **总测试用例数**: 37个
- **高优先级测试**: 25个
- **中优先级测试**: 12个
- **功能测试**: 28个
- **性能测试**: 2个
- **异常处理测试**: 3个
- **集成测试**: 4个

---

## 2. 主程序启动测试

### 2.1 主程序正常启动测试

**测试用例ID**: TC-MAIN-001  
**测试功能**: 主程序正常启动  
**测试目的**: 验证主程序能够正常启动并显示主窗口  
**测试类型**: 功能测试  
**优先级**: 高

**测试步骤**:
1. 运行 `python main.py`
2. 观察程序启动过程
3. 检查主窗口是否正常显示
4. 验证所有标签页是否正确加载

**预期结果**:
- 程序无异常启动，无错误日志
- 主窗口正常显示，标题为"FastMapV2"
- 窗口大小符合最小尺寸要求 (800x600)
- 5个标签页正确加载：Map分析、EXIF处理、仿写功能、特征点功能、分析报告
- 日志系统正常工作，日志文件正确创建

**测试数据**: 无特殊要求

**通过条件**: 所有预期结果都满足

---

### 2.2 依赖包检查测试

**测试用例ID**: TC-MAIN-002  
**测试功能**: 依赖包检查  
**测试目的**: 验证依赖包检查功能  
**测试类型**: 异常处理测试  
**优先级**: 高

**测试步骤**:
1. 临时重命名或移除某个关键依赖包 (如PyQt5)
2. 运行程序
3. 观察错误提示信息
4. 恢复依赖包并重新测试

**预期结果**:
- 程序能够检测到缺失的依赖包
- 显示明确的错误信息，指出缺失的包名
- 程序优雅退出，不会崩溃
- 恢复依赖包后程序能正常启动

**测试数据**: 缺失的依赖包名称

**通过条件**: 错误检测和处理机制正常工作

---

### 2.3 日志系统测试

**测试用例ID**: TC-MAIN-003  
**测试功能**: 日志系统配置  
**测试目的**: 验证日志系统配置和功能  
**测试类型**: 功能测试  
**优先级**: 中

**测试步骤**:
1. 启动程序
2. 检查日志文件是否创建在 `data/logs/` 目录
3. 观察控制台日志输出
4. 执行一些操作产生日志
5. 检查日志文件内容

**预期结果**:
- 日志文件 `fastmapv2.log` 正确创建
- 日志格式符合预期：`[时间] [级别] [模块] 消息`
- 控制台和文件日志都正常输出
- 不同级别的日志 (DEBUG, INFO, WARNING, ERROR) 正确分类

**测试数据**: 无特殊要求

**通过条件**: 日志系统完全正常工作

---

## 3. GUI主窗口测试

### 3.1 主窗口初始化测试

**测试用例ID**: TC-GUI-001  
**测试功能**: 主窗口初始化  
**测试目的**: 验证主窗口各组件正确初始化  
**测试类型**: 功能测试  
**优先级**: 高

**测试步骤**:
1. 启动程序
2. 检查窗口标题和大小
3. 验证菜单栏和状态栏
4. 检查标签页组件
5. 测试窗口最小化、最大化、关闭功能

**预期结果**:
- 窗口标题正确显示 "FastMapV2"
- 窗口大小符合最小尺寸要求 (800x600)
- 菜单栏包含：文件、工具、帮助
- 状态栏正常显示，包含拖拽提示信息
- 5个标签页正确创建并可切换
- 窗口操作功能正常

**测试数据**: 无特殊要求

**通过条件**: 主窗口所有组件正确初始化

---

### 3.2 标签页切换测试

**测试用例ID**: TC-GUI-002  
**测试功能**: 标签页切换  
**测试目的**: 验证标签页切换功能  
**测试类型**: 功能测试  
**优先级**: 高

**测试步骤**:
1. 启动程序
2. 依次点击每个标签页
3. 观察界面切换效果
4. 检查状态栏消息更新
5. 重复切换测试稳定性

**预期结果**:
- 标签页切换流畅，无卡顿
- 界面内容正确更新，无残留内容
- 状态栏显示当前标签页信息
- 标签页图标和文字正确显示
- 多次切换后程序稳定性良好

**测试数据**: 无特殊要求

**通过条件**: 标签页切换功能完全正常

---

### 3.3 菜单功能测试

**测试用例ID**: TC-GUI-003  
**测试功能**: 菜单功能  
**测试目的**: 验证菜单项功能  
**测试类型**: 功能测试  
**优先级**: 中

**测试步骤**:
1. 测试文件菜单：
   - 打开文件对话框
   - 退出程序功能
2. 测试工具菜单（如果有）
3. 测试帮助菜单：
   - 关于对话框
   - 使用说明

**预期结果**:
- 文件打开对话框正常显示，支持XML文件过滤
- 退出程序功能正常工作
- 关于对话框显示正确的版本信息
- 帮助文档能够正常打开
- 菜单项状态正确更新

**测试数据**: 测试XML文件路径

**通过条件**: 所有菜单功能正常工作

---

## 4. Map分析功能测试

### 4.1 XML文件加载测试

**测试用例ID**: TC-MAP-001  
**测试功能**: XML文件加载  
**测试目的**: 验证XML配置文件加载功能  
**测试类型**: 功能测试  
**优先级**: 高

**测试步骤**:
1. 准备测试XML配置文件：`tests\test_data\awb_scenario.xml`
2. 通过文件菜单选择XML文件
3. 观察加载过程和进度提示
4. 检查加载后的界面状态
5. 验证Map点数据完整性

**预期结果**:
- XML文件成功解析，无语法错误
- Map点数据正确显示在表格中
- 文件路径正确更新在状态栏：`tests\test_data\awb_scenario.xml`
- 界面响应正常，无卡顿
- 加载完成后界面状态正确
- 所有Map点配置信息正确加载

**测试数据**: `tests\test_data\awb_scenario.xml`

**通过条件**: XML文件成功加载并正确显示

---

### 4.2 Map表格显示测试

**测试用例ID**: TC-MAP-002  
**测试功能**: Map表格显示  
**测试目的**: 验证Map点表格显示功能  
**测试类型**: 功能测试  
**优先级**: 高

**测试步骤**:
1. 加载XML配置文件
2. 检查表格数据显示
3. 测试表格交互功能：
   - 滚动条功能
   - 列排序功能
   - 单元格选择
   - 右键菜单

**预期结果**:
- 表格正确显示所有Map点数据
- 列标题和数据格式正确
- 表格交互功能正常工作
- 数据类型显示正确（数字、字符串、布尔值）
- 表格性能良好，大数据量时响应正常

**测试数据**: 包含多个Map点的XML文件

**通过条件**: Map表格完全正常工作

---

### 4.3 Map形状可视化测试

**测试用例ID**: TC-MAP-003  
**测试功能**: Map形状可视化  
**测试目的**: 验证Map形状可视化功能  
**测试类型**: 功能测试  
**优先级**: 高

**测试步骤**:
1. 加载XML配置文件
2. 观察右侧形状查看器
3. 测试Map点选择功能
4. 检查Base Boundary显示
5. 测试缩放和平移功能

**预期结果**:
- 形状查看器正确显示Map点
- Map点选择正常工作，高亮显示
- Base Boundary正确显示和标识
- 缩放和平移功能正常
- 坐标轴和标签正确显示

**测试数据**: 包含形状信息的XML文件

**通过条件**: Map形状可视化完全正常

---

### 4.4 XML写入功能测试

**测试用例ID**: TC-MAP-004
**测试功能**: XML写入功能
**测试目的**: 验证Map分析页面XML配置写入功能
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 加载XML配置文件：`tests\test_data\awb_scenario.xml`
2. 修改Map点配置参数
3. 执行XML写入操作
4. 验证写入结果
5. 重新加载验证数据一致性

**预期结果**:
- XML写入操作正常执行，无错误
- 修改的配置正确保存到文件
- 文件格式保持正确的XML结构
- 重新加载后数据与修改一致
- 写入过程有适当的用户反馈

**测试数据**: `tests\test_data\awb_scenario.xml`

**通过条件**: XML写入功能完全正常

---

### 4.5 筛选功能测试

**测试用例ID**: TC-MAP-005
**测试功能**: 根据名称、色温区间、BV范围筛选
**测试目的**: 验证Map分析页面的筛选功能
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 加载XML配置文件：`tests\test_data\awb_scenario.xml`
2. 测试名称筛选功能
3. 测试色温区间筛选功能
4. 测试BV范围筛选功能
5. 测试组合筛选条件
6. 验证筛选结果准确性

**预期结果**:
- 名称筛选正确工作，支持模糊匹配
- 色温区间筛选准确，支持范围设置
- BV范围筛选正确，支持数值范围
- 组合筛选条件正确应用
- 筛选结果实时更新，界面响应正常
- 筛选后的数据显示正确

**测试数据**: `tests\test_data\awb_scenario.xml`

**通过条件**: 筛选功能完全正常

---

### 4.6 拖拽图片显示EXIF功能测试

**测试用例ID**: TC-MAP-006
**测试功能**: 拖拽图片显示EXIF功能
**测试目的**: 验证Map分析页面拖拽图片显示EXIF信息功能
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 在Map分析页面准备测试图片：`tests\test_data\221_Swangoose_IMG20250101064635_sim.jpg`
2. 拖拽图片到Map分析页面
3. 观察EXIF信息显示对话框
4. 验证EXIF信息的完整性和准确性
5. 测试对话框的交互功能

**预期结果**:
- 拖拽操作正确识别图片文件
- EXIF信息对话框正常弹出
- EXIF信息显示完整准确
- 对话框界面友好，信息分类清晰
- 关闭功能正常工作

**测试数据**: `tests\test_data\221_Swangoose_IMG20250101064635_sim.jpg`

**通过条件**: 拖拽图片显示EXIF功能完全正常

---

### 4.7 HTML报告生成测试

**测试用例ID**: TC-MAP-007
**测试功能**: 生成HTML报告功能
**测试目的**: 验证Map分析页面HTML报告生成功能
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 加载XML配置文件：`tests\test_data\awb_scenario.xml`
2. 完成Map分析操作
3. 执行HTML报告生成
4. 检查生成的HTML报告内容
5. 验证报告的完整性和格式

**预期结果**:
- HTML报告成功生成，无错误
- 报告包含完整的Map分析结果
- HTML格式正确，样式美观
- 报告内容准确反映分析数据
- 报告文件可正常在浏览器中打开

**测试数据**: `tests\test_data\awb_scenario.xml`

**通过条件**: HTML报告生成功能完全正常

---

## 5. EXIF处理功能测试

### 5.1 EXIF解析测试

**测试用例ID**: TC-EXIF-001  
**测试功能**: EXIF解析  
**测试目的**: 验证EXIF数据解析功能  
**测试类型**: 功能测试  
**优先级**: 高

**测试步骤**:
1. 准备测试图片文件：`tests\test_data\221_Swangoose_IMG20250101064635_sim.jpg`
2. 切换到EXIF处理标签页
3. 选择包含测试图片的目录：`tests\test_data\`
4. 执行EXIF解析
5. 观察解析过程和结果
6. 验证特定图片的EXIF信息提取

**预期结果**:
- 指定图片文件成功解析，DLL正常工作
- EXIF字段正确提取和显示
- 字段列表包含完整的EXIF信息
- 解析进度条正常显示
- 解析完成后显示统计信息
- 特定测试图片的EXIF信息完整准确

**测试数据**: `tests\test_data\221_Swangoose_IMG20250101064635_sim.jpg`

**通过条件**: EXIF解析功能完全正常

---

### 5.2 特定字段显示测试

**测试用例ID**: TC-EXIF-002
**测试功能**: 特定字段显示验证
**测试目的**: 验证EXIF处理页面能否正常显示指定的关键字段
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 加载测试图片：`tests\test_data\221_Swangoose_IMG20250101064635_sim.jpg`
2. 执行EXIF解析
3. 验证以下关键字段是否正常显示：
   - meta_data_currentFrame_ctemp
   - meta_data_after_face_Ctemp
   - meta_data_outputCtemp
   - meta_data_lastFrame_ctemp
   - stats_weight_triggerCtemp
   - face_info_lux_index
   - meta_data_resultCcmatrix
   - ealgo_data_SGW_gray_RpG
   - ealgo_data_SGW_gray_BpG
   - ealgo_data_AGW_gray_RpG
   - ealgo_data_AGW_gray_BpG
   - ealgo_data_Mix_csalgo_RpG
   - ealgo_data_Mix_csalgo_BpG
   - ealgo_data_After_face_RpG
   - ealgo_data_After_face_BpG
   - ealgo_data_cnvgEst_RpG
   - ealgo_data_cnvgEst_BpG
   - meta_data_gslpos
   - meta_data_gslGain_rgain
   - meta_data_gslGain_bgain
   - color_sensor_irRatio
   - color_sensor_acRatio
   - color_sensor_sensorCct
   - face_info_light_skin_target_rg
   - face_info_light_skin_target_bg
   - face_info_dark_skin_target_rg
   - face_info_dark_skin_target_bg
   - face_info_light_skin_cct
   - face_info_dark_skin_cct
   - face_info_light_skin_weight
   - face_info_skin_target_dist_ratio
   - face_info_faceawb_weight
   - face_info_final_skin_cct
   - offset_map
   - detect_map
   - map_weight_offsetMapWeight

**预期结果**:
- 所有指定字段都能正确显示
- 字段值准确无误，格式正确
- 字段名称显示完整
- 数据类型正确识别
- 无缺失或错误的字段信息

**测试数据**: `tests\test_data\221_Swangoose_IMG20250101064635_sim.jpg`

**通过条件**: 所有指定字段正常显示且数据准确

---

### 5.3 CSV导出与对比测试

**测试用例ID**: TC-EXIF-003
**测试功能**: CSV导出与标准文件对比
**测试目的**: 验证CSV导出功能并与标准文件进行对比验证
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 加载测试图片：`tests\test_data\221_Swangoose_IMG20250101064635_sim.jpg`
2. 选择要导出的EXIF字段
3. 执行CSV导出操作
4. 将导出的CSV文件与标准文件对比：`tests\test_data\exif_awb_export.csv`
5. 验证表头字段一致性
6. 验证字段顺序不变

**预期结果**:
- CSV文件成功创建在指定路径
- CSV格式正确，包含标题行
- 导出的CSV表头与标准文件`exif_awb_export.csv`完全一致
- 字段顺序与标准文件保持一致，不能改变
- 数据完整包含选择的字段
- 文件编码正确，支持中文
- 导出进度正常显示

**测试数据**:
- 测试图片：`tests\test_data\221_Swangoose_IMG20250101064635_sim.jpg`
- 标准对比文件：`tests\test_data\exif_awb_export.csv`

**通过条件**: CSV导出功能完全正常且与标准文件格式一致

---

### 5.4 原始JSON导出测试

**测试用例ID**: TC-EXIF-004  
**测试功能**: 原始JSON导出  
**测试目的**: 验证原始JSON导出功能  
**测试类型**: 功能测试  
**优先级**: 中

**测试步骤**:
1. 选择包含图片的目录
2. 执行原始JSON导出
3. 检查导出的JSONL文件
4. 验证数据完整性

**预期结果**:
- JSONL文件成功创建
- 原始数据完整保存，无丢失
- JSON格式正确，无语法错误
- 每行一个完整的JSON对象
- 文件大小合理

**测试数据**: 多个图片文件

**通过条件**: 原始JSON导出功能完全正常

---

## 6. 报告生成功能测试

### 6.1 分析报告页面加载CSV文件测试

**测试用例ID**: TC-REPORT-001
**测试功能**: 分析报告页面加载特定CSV文件
**测试目的**: 验证分析报告页面能正确加载指定的CSV文件
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 切换到分析报告标签页
2. 加载测试CSV文件：`tests\test_data\ceshiji.csv`
3. 加载对比CSV文件：`tests\test_data\duibij.csv`
4. 验证文件加载状态
5. 检查数据预览显示

**预期结果**:
- CSV文件成功加载，无错误提示
- 文件路径正确显示在界面上
- 数据预览正常显示文件内容
- 文件格式正确识别
- 加载进度正常显示

**测试数据**:
- 测试文件：`tests\test_data\ceshiji.csv`
- 对比文件：`tests\test_data\duibij.csv`

**通过条件**: CSV文件加载功能完全正常

---

### 6.2 预览匹配功能测试

**测试用例ID**: TC-REPORT-002
**测试功能**: 预览匹配成功
**测试目的**: 验证分析报告页面的预览匹配功能
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 加载测试CSV文件：`tests\test_data\ceshiji.csv`和`tests\test_data\duibij.csv`
2. 执行预览匹配操作
3. 观察匹配结果显示
4. 验证匹配成功的数据对
5. 检查匹配失败的处理

**预期结果**:
- 预览匹配功能正常执行
- 匹配成功的数据对正确显示
- 匹配结果统计信息准确
- 匹配失败的数据有明确提示
- 匹配过程有进度显示

**测试数据**:
- 测试文件：`tests\test_data\ceshiji.csv`
- 对比文件：`tests\test_data\duibij.csv`

**通过条件**: 预览匹配功能完全正常

---

### 6.3 图片分类导出功能测试

**测试用例ID**: TC-REPORT-003
**测试功能**: 图片分类导出功能主字段统计变化大小功能
**测试目的**: 验证图片分类导出和主字段统计变化分析功能
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 完成CSV文件加载和预览匹配
2. 执行图片分类导出功能
3. 测试主字段统计变化大小功能
4. 验证分类结果的准确性
5. 检查导出文件的完整性

**预期结果**:
- 图片分类功能正常工作
- 主字段统计变化分析准确
- 变化大小计算正确
- 分类导出文件格式正确
- 导出数据完整无缺失

**测试数据**:
- 测试文件：`tests\test_data\ceshiji.csv`
- 对比文件：`tests\test_data\duibij.csv`

**通过条件**: 图片分类导出功能完全正常

---

### 6.4 字段趋势对比图测试

**测试用例ID**: TC-REPORT-004
**测试功能**: 报告里面各字段趋势对比图显示
**测试目的**: 验证分析报告中各字段趋势对比图的显示功能
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 完成CSV文件加载和数据匹配
2. 生成分析报告
3. 检查各字段趋势对比图显示
4. 验证图表数据准确性
5. 测试图表交互功能

**预期结果**:
- 趋势对比图正常显示
- 图表数据准确反映字段变化
- 图表样式美观，易于理解
- 图表交互功能正常（如缩放、悬停等）
- 多个字段的对比图同时显示正常

**测试数据**:
- 测试文件：`tests\test_data\ceshiji.csv`
- 对比文件：`tests\test_data\duibij.csv`

**通过条件**: 字段趋势对比图显示完全正常

---

### 6.5 RpG/BpG对比分析测试

**测试用例ID**: TC-REPORT-005
**测试功能**: 每张图片RpG/BpG对比分析显示
**测试目的**: 验证每张图片的RpG/BpG对比分析功能
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 完成CSV文件加载和数据处理
2. 生成包含RpG/BpG分析的报告
3. 检查每张图片的RpG/BpG对比分析
4. 验证分析结果的准确性
5. 测试分析图表的显示效果

**预期结果**:
- 每张图片的RpG/BpG数据正确提取
- 对比分析结果准确显示
- 分析图表清晰易懂
- 数据统计信息正确
- 异常数据有明确标识

**测试数据**:
- 测试文件：`tests\test_data\ceshiji.csv`
- 对比文件：`tests\test_data\duibij.csv`

**通过条件**: RpG/BpG对比分析功能完全正常

---

### 6.6 详细数据对比表统计排序测试

**测试用例ID**: TC-REPORT-006
**测试功能**: 详细数据对比表统计正常、排序正常
**测试目的**: 验证详细数据对比表的统计和排序功能
**测试类型**: 功能测试
**优先级**: 高

**测试步骤**:
1. 完成数据加载和分析处理
2. 生成详细数据对比表
3. 验证统计信息的准确性
4. 测试表格排序功能
5. 检查数据完整性

**预期结果**:
- 详细数据对比表正确生成
- 统计信息准确无误
- 排序功能正常工作（升序、降序）
- 表格数据完整，无缺失
- 表格格式美观，易于阅读

**测试数据**:
- 测试文件：`tests\test_data\ceshiji.csv`
- 对比文件：`tests\test_data\duibij.csv`

**通过条件**: 详细数据对比表统计排序功能完全正常

---

### 6.3 报告历史管理测试

**测试用例ID**: TC-REPORT-003  
**测试功能**: 报告历史管理  
**测试目的**: 验证报告历史记录功能  
**测试类型**: 功能测试  
**优先级**: 中

**测试步骤**:
1. 生成多个不同类型的报告
2. 查看历史记录列表
3. 测试历史记录操作：
   - 打开历史报告
   - 删除历史记录
   - 清空历史记录
4. 验证历史记录持久化

**预期结果**:
- 历史记录正确保存和显示
- 记录信息完整（时间、类型、路径）
- 打开功能正常工作
- 删除和清空功能正常
- 历史记录在程序重启后保持

**测试数据**: 多个生成的报告文件

**通过条件**: 报告历史管理功能完全正常

---

## 7. 对话框功能测试

### 7.1 EXIF对比配置对话框测试

**测试用例ID**: TC-DIALOG-001  
**测试功能**: EXIF对比配置对话框  
**测试目的**: 验证EXIF对比配置对话框功能  
**测试类型**: 功能测试  
**优先级**: 高

**测试步骤**:
1. 打开EXIF对比对话框
2. 测试各个标签页功能：
   - 文件选择标签页
   - 字段选择标签页
   - 分析参数标签页
3. 配置参数并生成报告
4. 测试对话框的取消和确定功能

**预期结果**:
- 对话框正常显示，布局合理
- 标签页切换正常
- 文件选择功能正常工作
- 字段选择界面完整
- 参数配置功能正常
- 确定和取消按钮正常工作

**测试数据**: 测试CSV文件

**通过条件**: EXIF对比配置对话框完全正常

---

### 7.2 Map多维度分析对话框测试

**测试用例ID**: TC-DIALOG-002  
**测试功能**: Map多维度分析对话框  
**测试目的**: 验证Map多维度分析对话框功能  
**测试类型**: 功能测试  
**优先级**: 高

**测试步骤**:
1. 打开Map多维度分析对话框
2. 配置分析参数：
   - 分析范围选择
   - 参数设置
   - 输出选项
3. 生成分析报告
4. 测试对话框的各个功能

**预期结果**:
- 对话框正常显示
- 参数配置界面完整
- 分析范围选择正常
- 参数设置功能正常
- 输出选项配置正确
- 分析功能正常工作

**测试数据**: 已加载的XML配置

**通过条件**: Map多维度分析对话框完全正常

---

### 7.3 图片导出对话框测试

**测试用例ID**: TC-DIALOG-003  
**测试功能**: 图片导出对话框  
**测试目的**: 验证图片导出对话框功能  
**测试类型**: 功能测试  
**优先级**: 中

**测试步骤**:
1. 打开图片导出对话框
2. 配置导出参数：
   - 图片选择
   - 格式设置
   - 质量设置
   - 输出路径
3. 执行导出操作
4. 检查导出结果

**预期结果**:
- 对话框正常显示
- 参数配置界面完整
- 图片选择功能正常
- 格式和质量设置正确
- 输出路径选择正常
- 导出功能正常工作

**测试数据**: 测试图片文件

**通过条件**: 图片导出对话框完全正常

---

### 7.4 EXIF快速查看对话框测试

**测试用例ID**: TC-DIALOG-004  
**测试功能**: EXIF快速查看对话框  
**测试目的**: 验证EXIF快速查看对话框功能  
**测试类型**: 功能测试  
**优先级**: 中

**测试步骤**:
1. 拖拽图片文件到主窗口
2. 观察EXIF快速查看对话框
3. 检查EXIF信息显示：
   - 基本信息
   - 相机参数
   - 拍摄参数
4. 测试对话框关闭功能

**预期结果**:
- 对话框正常显示，自动弹出
- EXIF信息正确显示
- 信息分类清晰，易于阅读
- 关闭功能正常工作
- 对话框位置合理

**测试数据**: 单个图片文件

**通过条件**: EXIF快速查看对话框完全正常

---

## 8. 文件操作测试

### 8.1 XML文件操作测试

**测试用例ID**: TC-FILE-001  
**测试功能**: XML文件操作  
**测试目的**: 验证XML文件的打开、保存、另存为功能  
**测试类型**: 功能测试  
**优先级**: 高

**测试步骤**:
1. 测试文件打开功能：
   - 通过菜单打开XML文件
   - 验证文件加载
2. 测试文件保存功能：
   - 修改配置
   - 保存文件
3. 测试另存为功能：
   - 选择新路径
   - 另存为新文件

**预期结果**:
- 文件打开功能正常，支持文件过滤
- 保存功能正常工作，数据正确保存
- 另存为功能正常，创建新文件
- 文件格式正确，无数据丢失
- 文件路径更新正确

**测试数据**: 测试XML文件

**通过条件**: XML文件操作功能完全正常

---

### 8.2 文件拖拽测试

**测试用例ID**: TC-FILE-002  
**测试功能**: 文件拖拽  
**测试目的**: 验证文件拖拽功能  
**测试类型**: 功能测试  
**优先级**: 高

**测试步骤**:
1. 测试图片文件拖拽：
   - 拖拽单个图片到主窗口
   - 拖拽多个图片到主窗口
2. 测试XML文件拖拽：
   - 拖拽XML文件到主窗口
3. 测试不同拖拽方式：
   - 从文件管理器拖拽
   - 从桌面拖拽

**预期结果**:
- 图片拖拽触发EXIF快速查看
- 多个图片拖拽正常处理
- XML拖拽触发文件加载
- 拖拽功能稳定可靠
- 拖拽反馈及时

**测试数据**: 各种类型的文件

**通过条件**: 文件拖拽功能完全正常

---

### 8.3 文件格式验证测试

**测试用例ID**: TC-FILE-003  
**测试功能**: 文件格式验证  
**测试目的**: 验证文件格式验证功能  
**测试类型**: 异常处理测试  
**优先级**: 中

**测试步骤**:
1. 测试非XML文件：
   - 尝试打开非XML文件
   - 观察错误提示
2. 测试非图片文件：
   - 尝试解析非图片文件
   - 观察错误处理
3. 测试损坏文件：
   - 使用损坏的文件
   - 测试程序稳定性

**预期结果**:
- 格式验证正确执行
- 错误提示明确，用户友好
- 程序稳定性良好，不崩溃
- 提供有用的错误信息
- 支持重试操作

**测试数据**: 各种格式和损坏的文件

**通过条件**: 文件格式验证功能完全正常

---

## 9. 性能测试

### 9.1 大文件处理测试

**测试用例ID**: TC-PERF-001  
**测试功能**: 大文件处理  
**测试目的**: 验证大文件处理性能  
**测试类型**: 性能测试  
**优先级**: 中

**测试步骤**:
1. 准备大型XML文件 (1000+ Map点)
2. 准备大量图片文件 (100+ 张)
3. 测试处理性能：
   - 文件加载时间
   - 内存使用情况
   - 界面响应速度
4. 观察系统资源使用

**预期结果**:
- 大文件处理稳定，无崩溃
- 内存使用合理，无内存泄漏
- 处理时间在可接受范围内
- 界面响应正常，无卡顿
- 系统资源使用合理

**测试数据**: 大型XML文件和大量图片

**通过条件**: 大文件处理性能满足要求

---

### 9.2 并发处理测试

**测试用例ID**: TC-PERF-002  
**测试功能**: 并发处理  
**测试目的**: 验证并发处理能力  
**测试类型**: 性能测试  
**优先级**: 中

**测试步骤**:
1. 同时执行多个操作：
   - XML文件加载 + EXIF解析
   - 多个报告生成
   - 界面交互操作
2. 测试异步处理：
   - 长时间操作的后台处理
   - 界面响应性
3. 观察系统稳定性

**预期结果**:
- 并发处理稳定，无死锁
- 界面响应正常，无冻结
- 异步处理正确工作
- 系统稳定性良好
- 资源使用合理

**测试数据**: 多个操作任务

**通过条件**: 并发处理能力满足要求

---

## 10. 异常处理测试

### 10.1 文件不存在测试

**测试用例ID**: TC-EXCEPT-001  
**测试功能**: 文件不存在异常处理  
**测试目的**: 验证文件不存在的异常处理  
**测试类型**: 异常处理测试  
**优先级**: 高

**测试步骤**:
1. 选择不存在的文件：
   - 不存在的XML文件
   - 不存在的图片文件
2. 观察错误提示
3. 测试程序稳定性
4. 测试恢复操作

**预期结果**:
- 错误提示明确，指出具体问题
- 程序继续运行，不崩溃
- 界面状态正确，无残留错误
- 支持重新选择文件
- 错误日志正确记录

**测试数据**: 不存在的文件路径

**通过条件**: 文件不存在异常处理完全正常

---

### 10.2 文件格式错误测试

**测试用例ID**: TC-EXCEPT-002  
**测试功能**: 文件格式错误异常处理  
**测试目的**: 验证文件格式错误的异常处理  
**测试类型**: 异常处理测试  
**优先级**: 高

**测试步骤**:
1. 使用格式错误的文件：
   - 格式错误的XML文件
   - 损坏的图片文件
2. 观察错误处理
3. 测试程序恢复
4. 验证错误信息准确性

**预期结果**:
- 格式错误被准确检测
- 错误信息明确且具体
- 程序稳定运行，不崩溃
- 提供有用的修复建议
- 支持重新尝试

**测试数据**: 格式错误的文件

**通过条件**: 文件格式错误异常处理完全正常

---

### 10.3 内存不足测试

**测试用例ID**: TC-EXCEPT-003  
**测试功能**: 内存不足异常处理  
**测试目的**: 验证内存不足时的处理  
**测试类型**: 异常处理测试  
**优先级**: 中

**测试步骤**:
1. 处理超大文件：
   - 超大XML文件
   - 大量图片文件
2. 观察内存使用
3. 测试异常处理
4. 验证程序稳定性

**预期结果**:
- 内存使用监控正常
- 异常情况处理正确
- 程序不会崩溃
- 提供内存不足警告
- 支持优雅降级

**测试数据**: 超大文件

**通过条件**: 内存不足异常处理完全正常

---

## 11. 集成测试

### 11.1 端到端工作流测试

**测试用例ID**: TC-INT-001  
**测试功能**: 端到端工作流  
**测试目的**: 验证完整的端到端工作流  
**测试类型**: 集成测试  
**优先级**: 高

**测试步骤**:
1. 完整工作流测试：
   - 启动程序
   - 加载XML文件
   - 执行Map分析
   - 生成分析报告
   - 保存结果
2. 测试数据在各个模块间的传递
3. 验证最终结果的正确性

**预期结果**:
- 完整流程正常执行
- 各模块协同工作正常
- 数据传递正确，无丢失
- 结果符合预期要求
- 性能表现良好

**测试数据**: 完整的测试数据集

**通过条件**: 端到端工作流完全正常

---

### 11.2 数据一致性测试

**测试用例ID**: TC-INT-002  
**测试功能**: 数据一致性  
**测试目的**: 验证数据在不同模块间的一致性  
**测试类型**: 集成测试  
**优先级**: 高

**测试步骤**:
1. 在不同标签页间切换
2. 观察数据同步情况
3. 测试数据修改的一致性
4. 验证数据持久化
5. 测试并发访问

**预期结果**:
- 数据同步正确，无延迟
- 状态一致性好
- 无数据丢失或重复
- 持久化正确工作
- 并发访问安全

**测试数据**: 各种状态的数据

**通过条件**: 数据一致性完全满足要求

---

## 12. 测试用例总结

### 12.1 测试覆盖统计

| 测试类别 | 测试用例数量 | 覆盖率 |
|---------|------------|--------|
| 主程序测试 | 3 | 100% |
| GUI测试 | 3 | 100% |
| Map分析测试 | 7 | 100% |
| EXIF处理测试 | 4 | 100% |
| 报告生成测试 | 6 | 100% |
| 对话框测试 | 4 | 100% |
| 文件操作测试 | 3 | 100% |
| 性能测试 | 2 | 100% |
| 异常处理测试 | 3 | 100% |
| 集成测试 | 2 | 100% |
| **总计** | **37** | **100%** |

### 12.2 优先级分布

| 优先级 | 测试用例数量 | 占比 |
|-------|------------|------|
| 高 | 25 | 67.6% |
| 中 | 12 | 32.4% |
| 总计 | 37 | 100% |

### 12.3 测试类型分布

| 测试类型 | 测试用例数量 | 占比 |
|---------|------------|------|
| 功能测试 | 28 | 75.7% |
| 性能测试 | 2 | 5.4% |
| 异常处理测试 | 3 | 8.1% |
| 集成测试 | 4 | 10.8% |
| 总计 | 37 | 100% |

### 12.4 测试执行建议

1. **测试环境准备**：
   - 准备完整的测试数据集
   - 配置测试环境
   - 准备测试工具

2. **测试执行顺序**：
   - 先执行高优先级测试
   - 按功能模块分组执行
   - 最后执行集成测试

3. **测试结果记录**：
   - 记录每个测试用例的执行结果
   - 保存详细的测试日志
   - 收集性能数据

4. **问题跟踪**：
   - 建立问题跟踪机制
   - 分类处理发现的问题
   - 验证修复效果

### 12.5 测试自动化建议

1. **自动化测试框架**：
   - 使用pytest框架
   - 集成CI/CD流程
   - 自动生成测试报告

2. **测试数据管理**：
   - 建立测试数据库
   - 版本化管理测试数据
   - 自动生成测试数据

3. **持续集成**：
   - 每次代码提交自动执行测试
   - 定期执行完整测试套件
   - 监控测试覆盖率和质量

---

## 13. 附录

### 13.1 测试数据清单

**XML文件**：
- awb_scenario.xml (标准配置文件)
- 大型XML文件 (性能测试)
- 格式错误XML文件 (异常测试)

**图片文件**：
- 标准JPG图片
- 各种EXIF信息的图片
- 损坏的图片文件
- 非JPG格式文件

**CSV文件**：
- 标准EXIF CSV文件
- 对比CSV文件
- 格式错误CSV文件

### 13.2 测试环境要求

**硬件要求**：
- CPU: 双核2.0GHz以上
- 内存: 4GB以上
- 硬盘: 1GB可用空间

**软件要求**：
- Python 3.9+
- PyQt5
- 相关依赖包
- 测试工具

**操作系统**：
- Windows 10/11
- Linux (可选)
- macOS (可选)

### 13.3 测试工具清单

- **pytest**: 单元测试框架
- **unittest**: Python标准测试库
- **Selenium**: UI自动化测试 (可选)
- **Performance Monitor**: 性能监控
- **Memory Profiler**: 内存分析

---

*文档版本: 1.0*  
*创建日期: 2025-08-25*  
*最后更新: 2025-08-25*