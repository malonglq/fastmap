
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXIF对比分析报告</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; border-bottom: 2px solid #007bff; padding-bottom: 10px; }
        h2 { color: #007bff; margin-top: 30px; }
        .summary { background: #e9f4ff; padding: 15px; border-radius: 5px; margin: 20px 0; }
        .chart-container { margin: 20px 0; height: 360px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #343a40; color: white; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .highlight-high { background-color: #ffebee !important; }
        .highlight-medium { background-color: #fff3e0 !important; }
        .change-positive { color: #28a745; font-weight: bold; }
        .change-negative { color: #dc3545; font-weight: bold; }
        .change-neutral { color: #6c757d; }
        .table-container { max-height: 500px; overflow-y: auto; border: 1px solid #dee2e6; border-radius: 5px; }
        .field-section { margin: 30px 0; border: 1px solid #ddd; border-radius: 5px; padding: 15px; }
        .kpi-cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        .kpi-card { background:#fafafa; border:1px solid #eee; border-radius:6px; padding:12px; text-align:center; }
        .kpi-title { color:#666; font-size:12px; }
        .kpi-value { font-size:20px; font-weight:bold; margin-top:6px; }
        .muted { color:#888; font-size:12px; }
        .pill { display:inline-block; padding:2px 6px; border-radius:10px; background:#eef5ff; color:#3572b0; font-size:12px; margin-left:6px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>EXIF对比分析报告</h1>

        <div class="summary">
            <h3>报告摘要</h3>
            <p><strong>测试机文件:</strong> zf_awb_exif_data1.csv</p>
            <p><strong>对比机文件:</strong> zf_awb_exif_data2.csv</p>
            <p><strong>匹配场景数:</strong> 2 <span class="pill">覆盖率 100.0%</span> <span class="pill">方法 sequence_number</span></p>
            <p class="muted">未匹配 测试机: 0 | 对比机: 0</p>
            <p><strong>分析字段数:</strong> 3</p>
            <p><strong>生成时间:</strong> 2025-08-08 14:20:57</p>
        </div>

        <h2>核心KPI总览</h2>
        <div class="kpi-cards"><div class='kpi-card'><div class='kpi-title'>color_sensor_irRatio</div><div class='kpi-value'>MAE 0.000</div><div class='kpi-value'>RMSE 0.000</div><div class='kpi-value'>R² 1.000</div><div class='kpi-title'>异常率 0.00%</div></div><div class='kpi-card'><div class='kpi-title'>color_sensor_sensorCct</div><div class='kpi-value'>MAE 0.000</div><div class='kpi-value'>RMSE 0.000</div><div class='kpi-value'>R² 1.000</div><div class='kpi-title'>异常率 0.00%</div></div><div class='kpi-card'><div class='kpi-title'>meta_data_currentFrame_bv</div><div class='kpi-value'>MAE 0.000</div><div class='kpi-value'>RMSE 0.000</div><div class='kpi-value'>R² 1.000</div><div class='kpi-title'>异常率 0.00%</div></div></div>

        <h2>核心指标趋势图</h2>
        
        <div class="field-section">
          <div class="d-flex align-items-center mb-2">
            <h3 class="me-2 mb-0">color_sensor_irRatio</h3>
            <span class="pill">趋势对比</span>
          </div>
          <div class="row">
            <div class="col-md-8">
              <div class="chart-container" style="height:320px;">
                <canvas id="chart_color_sensor_irRatio"></canvas>
              </div>
            </div>
            <div class="col-md-4">
              <div class="mb-2"><strong>变化分布</strong></div>
              <div class="chart-container" style="height:320px;">
                <canvas id="dist_color_sensor_irRatio"></canvas>
              </div>
            </div>
          </div>
        </div>
        
        <div class="field-section">
          <div class="d-flex align-items-center mb-2">
            <h3 class="me-2 mb-0">color_sensor_sensorCct</h3>
            <span class="pill">趋势对比</span>
          </div>
          <div class="row">
            <div class="col-md-8">
              <div class="chart-container" style="height:320px;">
                <canvas id="chart_color_sensor_sensorCct"></canvas>
              </div>
            </div>
            <div class="col-md-4">
              <div class="mb-2"><strong>变化分布</strong></div>
              <div class="chart-container" style="height:320px;">
                <canvas id="dist_color_sensor_sensorCct"></canvas>
              </div>
            </div>
          </div>
        </div>
        
        <div class="field-section">
          <div class="d-flex align-items-center mb-2">
            <h3 class="me-2 mb-0">meta_data_currentFrame_bv</h3>
            <span class="pill">趋势对比</span>
          </div>
          <div class="row">
            <div class="col-md-8">
              <div class="chart-container" style="height:320px;">
                <canvas id="chart_meta_data_currentFrame_bv"></canvas>
              </div>
            </div>
            <div class="col-md-4">
              <div class="mb-2"><strong>变化分布</strong></div>
              <div class="chart-container" style="height:320px;">
                <canvas id="dist_meta_data_currentFrame_bv"></canvas>
              </div>
            </div>
          </div>
        </div>
        

        <h2>异常样本 TopN</h2>
        <table><thead><tr><th>字段</th><th>序列号</th><th>差值%</th></tr></thead><tbody><tr class=''><td>color_sensor_irRatio</td><td>32</td><td>0.00%</td></tr><tr class=''><td>color_sensor_irRatio</td><td>1</td><td>0.00%</td></tr><tr class=''><td>color_sensor_sensorCct</td><td>32</td><td>0.00%</td></tr><tr class=''><td>color_sensor_sensorCct</td><td>1</td><td>0.00%</td></tr><tr class=''><td>meta_data_currentFrame_bv</td><td>32</td><td>0.00%</td></tr><tr class=''><td>meta_data_currentFrame_bv</td><td>1</td><td>0.00%</td></tr></tbody></table>

        <h2>详细数据对比表</h2>
        
<div class="mb-3">
  <input type="text" id="tableSearch_all" class="form-control" placeholder="🔍 搜索表格内容..." style="max-width: 300px;">
</div>
<div class="table-container">
  <table id="dataTable_all" class="table table-striped table-hover">
    <thead class="table-dark">
      <tr><th onclick="sortTable_all(0)" style="cursor: pointer;">文件1 <i class="fas fa-sort"></i></th><th onclick="sortTable_all(1)" style="cursor: pointer;">文件2 <i class="fas fa-sort"></i></th><th onclick="sortTable_all(2)" style="cursor: pointer;">相似度 <i class="fas fa-sort"></i></th><th colspan="3">color_sensor_irRatio</th><th colspan="3">color_sensor_sensorCct</th><th colspan="3">meta_data_currentFrame_bv</th></tr>
      <tr><th></th><th></th><th></th><th onclick="sortTable_all(3)" style="cursor: pointer;">处理前 <i class="fas fa-sort"></i></th><th onclick="sortTable_all(4)" style="cursor: pointer;">处理后 <i class="fas fa-sort"></i></th><th onclick="sortTable_all(5)" style="cursor: pointer;">变化% <i class="fas fa-sort"></i></th><th onclick="sortTable_all(6)" style="cursor: pointer;">处理前 <i class="fas fa-sort"></i></th><th onclick="sortTable_all(7)" style="cursor: pointer;">处理后 <i class="fas fa-sort"></i></th><th onclick="sortTable_all(8)" style="cursor: pointer;">变化% <i class="fas fa-sort"></i></th><th onclick="sortTable_all(9)" style="cursor: pointer;">处理前 <i class="fas fa-sort"></i></th><th onclick="sortTable_all(10)" style="cursor: pointer;">处理后 <i class="fas fa-sort"></i></th><th onclick="sortTable_all(11)" style="cursor: pointer;">变化% <i class="fas fa-sort"></i></th></tr>
    </thead>
    <tbody>
<tr><td>32_zhufeng_IMG20250101194241_ori.jpg</td><td>32_zhufeng_IMG20250101194241_ori.jpg</td><td>1.000</td><td>0.811676</td><td>0.811676</td><td class="change-neutral">0.00%</td><td>5309.000000</td><td>5309.000000</td><td class="change-neutral">0.00%</td><td>5.791016</td><td>5.791016</td><td class="change-neutral">0.00%</td></tr><tr><td>1_zhufeng_IMG20250101192850_ori.jpg</td><td>1_zhufeng_IMG20250101192850_ori.jpg</td><td>1.000</td><td>0.855261</td><td>0.855261</td><td class="change-neutral">0.00%</td><td>5337.000000</td><td>5337.000000</td><td class="change-neutral">0.00%</td><td>5.263672</td><td>5.263672</td><td class="change-neutral">0.00%</td></tr>
    </tbody>
  </table>
</div>

<script>
(function(){
  // 搜索
  var input=document.getElementById('tableSearch_all');
  if(input){
    input.addEventListener('keyup',function(){
      var filter=this.value.toLowerCase();
      var table=document.getElementById('dataTable_all');
      if(!table) return; var rows=table.tBodies[0].rows; for(var i=0;i<rows.length;i++){
        var txt=rows[i].textContent.toLowerCase(); rows[i].style.display = txt.indexOf(filter)!==-1? '':'none';
      }
    });
  }
  // 排序（按绝对值排序数值/百分比；字符串则字典序）
  var sortDirection = {};
  window.sortTable_all=function(col){
    var table=document.getElementById('dataTable_all'); if(!table) return; var tbody=table.tBodies[0]; var rows=Array.prototype.slice.call(tbody.rows);
    sortDirection[col] = sortDirection[col] === 'asc' ? 'desc' : 'asc';
    var asc = sortDirection[col] === 'asc';
    rows.sort(function(a,b){
      var av=a.cells[col].textContent.trim(); var bv=b.cells[col].textContent.trim();
      var an=parseFloat(av.replace('%','')); var bn=parseFloat(bv.replace('%',''));
      var res=0; if(!isNaN(an)&&!isNaN(bn)) res=Math.abs(an)-Math.abs(bn); else res=av.localeCompare(bv);
      return asc?res:-res;
    });
    rows.forEach(function(r){tbody.appendChild(r);});
  }
})();
</script>


        <h2>统计摘要</h2>
        
    <table>
        <thead>
            <tr>
                <th>字段名</th>
                <th>测试机均值</th>
                <th>对比机均值</th>
                <th>测试机范围</th>
                <th>对比机范围</th>
                <th>平均差值</th>
                <th>平均差值百分比</th>
            </tr>
        </thead>
        <tbody>
    
            <tr>
                <td>color_sensor_irRatio</td>
                <td>0.8335</td>
                <td>0.8335</td>
                <td>0.8117 ~ 0.8553</td>
                <td>0.8117 ~ 0.8553</td>
                <td class="">0.0000</td>
                <td class="">0.00%</td>
            </tr>
        
            <tr>
                <td>color_sensor_sensorCct</td>
                <td>5323.0000</td>
                <td>5323.0000</td>
                <td>5309.0000 ~ 5337.0000</td>
                <td>5309.0000 ~ 5337.0000</td>
                <td class="">0.0000</td>
                <td class="">0.00%</td>
            </tr>
        
            <tr>
                <td>meta_data_currentFrame_bv</td>
                <td>5.5273</td>
                <td>5.5273</td>
                <td>5.2637 ~ 5.7910</td>
                <td>5.2637 ~ 5.7910</td>
                <td class="">0.0000</td>
                <td class="">0.00%</td>
            </tr>
        
        </tbody>
    </table>
    
    </div>

    <script>
        
        // 折线图: color_sensor_irRatio
        (function(){
          var ctx=document.getElementById('chart_color_sensor_irRatio'); if(ctx){
            var c=ctx.getContext('2d');
            new Chart(c, {
              type:'line',
              data:{
                labels:["32", "1"],
                datasets:[{label:'测试机',data:[0.811676443, 0.855261266],borderColor:'#e91e63',backgroundColor:'rgba(233,30,99,0.15)',tension:0.2,pointRadius:2},
                          {label:'对比机',data:[0.811676443, 0.855261266],borderColor:'#3f51b5',backgroundColor:'rgba(63,81,181,0.15)',tension:0.2,pointRadius:2}]
              },
              options:{responsive:true,maintainAspectRatio:false,plugins:{title:{display:true,text:"color_sensor_irRatio \u8d8b\u52bf\u5bf9\u6bd4"},legend:{display:true,position:'top'}},scales:{x:{display:true,title:{display:true,text:'序列号'}},y:{display:true,title:{display:true,text:'数值'}}}}
            );
          }
          var dctx=document.getElementById('dist_color_sensor_irRatio'); if(dctx){
            var dc=dctx.getContext('2d');
            new Chart(dc, {
              type:'doughnut',
              data:{labels:[">10%", "1~10%", "0%", "-1~-10%", "<-10%"],datasets:[{data:[0, 0, 2, 0, 0],backgroundColor:["#2ecc71", "#95a5a6", "#3498db", "#f39c12", "#e74c3c"],hoverOffset:4}]},
              options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:true,position:'right'},title:{display:true,text:'变化分布'}}}
            });
          }
        })();
        
        // 折线图: color_sensor_sensorCct
        (function(){
          var ctx=document.getElementById('chart_color_sensor_sensorCct'); if(ctx){
            var c=ctx.getContext('2d');
            new Chart(c, {
              type:'line',
              data:{
                labels:["32", "1"],
                datasets:[{label:'测试机',data:[5309.0, 5337.0],borderColor:'#e91e63',backgroundColor:'rgba(233,30,99,0.15)',tension:0.2,pointRadius:2},
                          {label:'对比机',data:[5309.0, 5337.0],borderColor:'#3f51b5',backgroundColor:'rgba(63,81,181,0.15)',tension:0.2,pointRadius:2}]
              },
              options:{responsive:true,maintainAspectRatio:false,plugins:{title:{display:true,text:"color_sensor_sensorCct \u8d8b\u52bf\u5bf9\u6bd4"},legend:{display:true,position:'top'}},scales:{x:{display:true,title:{display:true,text:'序列号'}},y:{display:true,title:{display:true,text:'数值'}}}}
            );
          }
          var dctx=document.getElementById('dist_color_sensor_sensorCct'); if(dctx){
            var dc=dctx.getContext('2d');
            new Chart(dc, {
              type:'doughnut',
              data:{labels:[">10%", "1~10%", "0%", "-1~-10%", "<-10%"],datasets:[{data:[0, 0, 2, 0, 0],backgroundColor:["#2ecc71", "#95a5a6", "#3498db", "#f39c12", "#e74c3c"],hoverOffset:4}]},
              options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:true,position:'right'},title:{display:true,text:'变化分布'}}}
            });
          }
        })();
        
        // 折线图: meta_data_currentFrame_bv
        (function(){
          var ctx=document.getElementById('chart_meta_data_currentFrame_bv'); if(ctx){
            var c=ctx.getContext('2d');
            new Chart(c, {
              type:'line',
              data:{
                labels:["32", "1"],
                datasets:[{label:'测试机',data:[5.791015625, 5.263671875],borderColor:'#e91e63',backgroundColor:'rgba(233,30,99,0.15)',tension:0.2,pointRadius:2},
                          {label:'对比机',data:[5.791015625, 5.263671875],borderColor:'#3f51b5',backgroundColor:'rgba(63,81,181,0.15)',tension:0.2,pointRadius:2}]
              },
              options:{responsive:true,maintainAspectRatio:false,plugins:{title:{display:true,text:"meta_data_currentFrame_bv \u8d8b\u52bf\u5bf9\u6bd4"},legend:{display:true,position:'top'}},scales:{x:{display:true,title:{display:true,text:'序列号'}},y:{display:true,title:{display:true,text:'数值'}}}}
            );
          }
          var dctx=document.getElementById('dist_meta_data_currentFrame_bv'); if(dctx){
            var dc=dctx.getContext('2d');
            new Chart(dc, {
              type:'doughnut',
              data:{labels:[">10%", "1~10%", "0%", "-1~-10%", "<-10%"],datasets:[{data:[0, 0, 2, 0, 0],backgroundColor:["#2ecc71", "#95a5a6", "#3498db", "#f39c12", "#e74c3c"],hoverOffset:4}]},
              options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:true,position:'right'},title:{display:true,text:'变化分布'}}}
            });
          }
        })();
        
    </script>
</body>
</html>
        